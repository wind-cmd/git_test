<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.ClazzMapper">
  <!-- 分页条件查询班级 -->
  <select id="page" resultType="Clazz">
    select c.*, e.name as masterName
    from clazz c left join emp e on c.master_id = e.id
    <where>
      <if test="name != null and name != ''">
        c.name like concat('%', #{name}, '%')
      </if>
      <if test="begin != null and end != null">
        and c.end_date between #{begin} and #{end}
      </if>
    </where>
    order by c.update_time desc
  </select>

  <!-- studentCountData -->

  <select id="studentCountData">
SELECT 
    c.name AS clazzName, COUNT(*) AS studentData
FROM
    student s
        right JOIN
    clazz c ON s.clazz_id = c.id
GROUP BY c.name order by studentData
  </select>
</mapper>